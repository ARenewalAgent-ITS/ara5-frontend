'use client';

import Aos from 'aos';
import React from 'react';
import { useEffect, useState } from 'react';

import NextImage from '@/components/NextImage';
import SEO from '@/components/SEO';
import useCountdown from '@/hooks/useCountdown';

export default function RegisLayout({
  children,
}: {
  children: React.ReactNode;
}) {
  const [days, hours, minutes, seconds] = useCountdown(new Date('2024-05-03'));
  const [closeReg, setCloseReg] = useState(false);

  useEffect(() => {
    Aos.init();
    if (days === 0 && hours === 0 && minutes === 0 && seconds === 0) {
      setCloseReg(true);
    }
  }, [days, hours, minutes, seconds]);

  return (
    <>
      {closeReg ? (
        <>{children}</>
      ) : (
        <>
          <div className='w-full min-h-screen bg-whites-100'>
            <SEO
              title='Registrasi Tenant Explo IT'
              description='ExploIT merupakan wadah atau sarana untuk menampilkan hasil karya teknologi dari
              mahasiswa/i Indonesia melalui pameran. Pameran ini juga akan diisi dengan berbagai
              talkshow dengan topik mengenai teknologi informasi. ExploIT dalam rangkaian ARA
              4.0 memiliki topik bahasan mendatang mengenai IoT (Internet of Thing). ExploIT ditujukan bagi mahasiswa/i, dosen, dan masyarakat di Indonesia serta Start Up di
              bidang IoT (Internet of Thing).'
            />
            <section className='fixed hidden lg:block lg:w-[60%] xl:w-[56%] right-0 top-0 h-full'>
              <div className='relative w-full h-full bg-[#D8F4D8]'>
                <NextImage
                  src='/images/exploit/apartment.png'
                  alt='apartment'
                  width={580}
                  height={780}
                  className='absolute right-0 bottom-0'
                  data-aos='fade-left'
                  data-aos-delay='300'
                  priority
                />
                <NextImage
                  src='/images/exploit/center_tree.png'
                  alt='tree'
                  width={160}
                  height={260}
                  className='absolute -bottom-3 ml-72 z-10 hidden xl:block'
                  data-aos='fade-up'
                  data-aos-delay='300'
                />
                <NextImage
                  src='/images/exploit/left_tree.png'
                  alt='tree'
                  width={160}
                  height={188}
                  className='absolute bottom-0'
                  data-aos='fade-right'
                  data-aos-delay='300'
                />
              </div>
            </section>
            <main className='md:px-16 lg:px-5 xl:px-8 2xl:px-10 px-4 py-6 lg:w-[40%] xl:w-[44%] min-h-screen flex flex-col justify-center'>
              {children}
            </main>
          </div>
        </>
      )}
    </>
  );
}
