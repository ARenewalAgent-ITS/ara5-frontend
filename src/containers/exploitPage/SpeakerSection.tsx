'use client';
import 'swiper/css';
import 'swiper/css/navigation';
import 'swiper/css/pagination';
import 'swiper/css/scrollbar';
import 'swiper/swiper-bundle.min.css';

import React, { useState } from 'react';
import SwiperCore, { Autoplay, Pagination, Swiper as SwiperType } from 'swiper';
import { Swiper, SwiperSlide } from 'swiper/react';

import NextImage from '@/components/NextImage';
import Typography from '@/components/Typography';

interface TSpeakerInfo {
  name: string;
  status: string;
  desc: string;
  index: number;
  className?: string;
}

function SpeakerCard(props: TSpeakerInfo) {
  return (
    <div
      className={props.className}
      style={{
        transition: 'transform 0.3s ease',
      }}
    >
      <div className='hidden xl:flex justify-center items-center'>
        <div
          className={`flex w-[941px] h-auto gap-x-12 py-11 pl-11 pr-14 bg-white justify-center items-center rounded-2xl`}
        >
          <div className='flex-auto'>
            <NextImage
              src={'/img/exploitpage/speaker_profile.png'}
              width={396}
              height={396}
              alt='speaker profile'
            />
          </div>
          <div className='flex-auto'>
            <Typography variant='h4' weight='bold' font='poppins'>
              {props.name} {props.index}
            </Typography>
            <Typography variant='h6'>{props.status}</Typography>
            <Typography as='p' className='mt-8'>
              {props.desc}
            </Typography>
          </div>
        </div>
      </div>
      <div className='flex xl:hidden justify-center items-center'>
        <div className='flex flex-col w-[360px] sm:w-[600px] md:w-[725px] h-auto gap-x-12 p-6 bg-white justify-center items-center rounded-2xl z-10'>
          <div className='flex flex-col justify-center items-center text-center'>
            <Typography
              variant='h5'
              weight='bold'
              font='poppins'
              className='text-[20px] text-whites-1100'
            >
              {props.name} {props.index}
            </Typography>
            <Typography variant='h5' className='text-[20px] text-whites-1100'>
              {props.status}
            </Typography>
          </div>
          <div className='flex justify-center items-center mt-8'>
            <NextImage
              src={'/img/exploitpage/speaker_profile.png'}
              width={132}
              height={132}
              alt='speaker profile'
              className='sm:scale-[1.2] md:scale-[1.3]'
            />
          </div>
          <div className='flex justify-center items-center text-center'>
            <Typography as='p' className='mt-8 text-whites-1100 text-[13px]'>
              {props.desc}
            </Typography>
          </div>
        </div>
      </div>
    </div>
  );
}

export default function SpeakerSection() {
  const paginationStyle = {
    '--swiper-pagination-color': '#000000',
    '--swiper-pagination-bullet-inactive-color': '#000000',
    '--swiper-pagination-bullet-inactive-opacity': '0.5',
    '--swiper-pagination-bullet-active-opacity': '1',
    '--swiper-pagination-bullet-size': '0.65rem',
  } as React.CSSProperties;
  SwiperCore.use([Autoplay]);
  const [activeIndex, setActiveIndex] = useState(0);
  const handleSlideChange = (swiper: SwiperType) => {
    setActiveIndex(swiper.realIndex);
  };

  const speaker = {
    name: 'Lorem Ipsum',
    status: 'UI/UX Designer',
    desc: 'Olimpiade merupakan kompetisi yang diadakan dalam rangkaian acara ARA 5.0. Olimpiade dalam rangkaian acara ARA 5.0 ditujukan   bagi siswa SMA/SMK di seluruh Indonesia. Soal meliputi seputar Kurikulum Departemen Teknologi Informasi akan diberikan kepada peserta kompetisi Olimpiade.',
  };
  const speakers = Array.from({ length: 4 }, () => speaker);

  return (
    <>
      <div className='h-[auto] pt-[3rem] pb-[2rem] xl:pb-[6rem]'>
        <div className='flex items-center justify-center'>
          <NextImage
            src={'/svg/exploit/speakers_plank.svg'}
            alt='plank'
            width={393.6}
            height={63.2}
            className='mb-20 lg:w-[393px] md:w-[360px] sm:w-[294.75px] w-[236.16px]'
            data-aos='zoom-in'
            data-aos-delay='200'
          />
        </div>
        <Swiper
          modules={[Pagination]}
          spaceBetween={0}
          slidesPerView={1}
          pagination={{ clickable: true }}
          autoplay={{ delay: 2500 }}
          loop={true}
          longSwipes={false}
          onSlideChange={(swiper) => handleSlideChange(swiper)}
          centeredSlides={true}
          breakpoints={{
            1280: {
              slidesPerView: 2,
            },
          }}
          style={paginationStyle}
          data-aos='fade-left'
          data-aos-delay='300'
        >
          {speakers.map((spk, index) => (
            <SwiperSlide key={index}>
              <SpeakerCard
                name={spk.name}
                status={spk.status}
                desc={spk.desc}
                index={index}
                className={`${
                  activeIndex === index ? 'scale-[1]' : 'scale-[0.75]'
                } mx-100`}
              />
            </SwiperSlide>
          ))}
        </Swiper>
        <NextImage
          src={'/svg/exploit/left_bush.svg'}
          alt='left bush'
          width={72}
          height={97}
          className='w-[80px] h-[112px] absolute -left-3 bottom-5 sm:w-[145px] sm:h-[250px] sm:-left-7 lg:w-[238px] lg:h-[377px] lg:-left-10'
          data-aos='fade-right'
          data-aos-delay='300'
        />
      </div>
    </>
  );
}
